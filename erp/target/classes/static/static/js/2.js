webpackJsonp([2,5,6,8],{"0ago":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={data:function(){return{without:"暂无数据",oemCount:0,productCount:0,formData:{nailname:""},checkList:[],btndisabled:-1,dialogOemForm:!1,dialogNailForm:!1,dialogFormVisible:!1,dialogFeatureForm:!1,dialogRelevance:!1,dynamicItem:[],typeform:{typename:""},productform:{proname:"",procode:"",typeid:""},oemform:{oemname:""},nailform:{nailname:""},featureform:{frature:""},activeName:"first",value0:"",value1:"",nailname:"",feature:"",currentPage:1,pageSize:10,productList:[],oemList:[],nailList:[],featureList:[],typeList:[]}},methods:{currentChangePro:function(t){this.currentPage=t,this.getAllproduct()},sizeChangePro:function(t){this.pageSize=t,this.getAllproduct()},currentChange:function(t){this.currentPage=t,this.getAllOem()},sizeChange:function(t){this.pageSize=t,this.getAllOem()},typeSubmit:function(){var t=this,e=new URLSearchParams;e.append("typename",this.typeform.typename),this.$http.post("/product/typeSet.do",e).then(function(e){"permission.html"===e.data?t.$message.error("您没有权限！请联系管理员！"):t.typeList=e.data}),this.$refs.typeform.resetFields()},productSubmit:function(){var t=this,e=new URLSearchParams;e.append("proname",this.productform.proname),e.append("procode",this.productform.procode),e.append("typeid",this.productform.typeid),this.$http.post("/product/Set.do",e).then(function(e){"permission.html"===e.data?t.$message.error("您没有权限！请联系管理员！"):(t.$message.success("添加成功！"),t.productList=e.data)}),this.$refs.productform.resetFields()},oemSubmit:function(){var t=this,e=new URLSearchParams;e.append("oemname",this.oemform.oemname),this.$http.post("/oem/Set.do",e).then(function(e){"permission.html"===e.data?t.$message.error("您没有权限！请联系管理员！"):t.oemList=e.data.data})},getAllRelated:function(){var t=this;this.$http.post("/nail/List.do").then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":t.nailList=e.data})},submitForm:function(t){var e=this;if(this.nailname=this.formData.nailname,""!=this.nailname){var a=new URLSearchParams;a.append("nailname",this.nailname),this.$http.post("/nail/nailSet.do",a).then(function(t){"permission.html"===t.data?e.$message.error("您没有权限！请联系管理员！"):(e.$message.success("添加成功"),e.nailList=t.data.nail)})}else this.$message.error("请填写问题点！")},getAllOem:function(){var t=this,e=new URLSearchParams;e.append("row",this.pageSize),e.append("page",this.currentPage),this.$http.post("/oem/List.do",e).then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":(t.oemList=e.data.data,t.oemCount=e.data.count)})},getAllproduct:function(){var t=this,e=new URLSearchParams;e.append("row",this.pageSize),e.append("page",this.currentPage),this.$http.post("/product/List.do",e).then(function(e){"permission.html"===e.data&&(t.without="无权限，请联系管理员"),t.productList=e.data.data,t.productCount=e.data.count})},getAlltype:function(){var t=this;this.$http.post("/product/typeList.do").then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":t.typeList=e.data})},handleClick:function(t,e){}},created:function(){this.getAllproduct(),this.getAllRelated(),this.getAllOem(),this.getAlltype()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alarmconfig clearfix"},[a("div",{staticClass:"mian"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"产品线",name:"first"}},[a("el-form",{ref:"typeform",attrs:{model:t.typeform,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品线",prop:"typename"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.typeform.typename,callback:function(e){t.$set(t.typeform,"typename",e)},expression:"typeform.typename"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"oenstn",attrs:{type:"primary"},on:{click:function(e){t.typeSubmit()}}},[t._v("添 加")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.typeList,"empty-text":t.without}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typename",label:"产品线编码"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"产品品名",name:"second"}},[a("el-form",{ref:"productform",attrs:{model:t.productform,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择产品线",prop:"typeid"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.productform.typeid,callback:function(e){t.$set(t.productform,"typeid",e)},expression:"productform.typeid"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(this.without))])]),t._v(" "),t._l(t.typeList,function(t){return a("el-option",{key:t.typeid,attrs:{label:t.typename,value:t.typeid}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"产品编码",prop:"procode"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.productform.procode,callback:function(e){t.$set(t.productform,"procode",e)},expression:"productform.procode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品品名",prop:"proname"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.productform.proname,callback:function(e){t.$set(t.productform,"proname",e)},expression:"productform.proname"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"oenstn",attrs:{type:"primary"},on:{click:function(e){t.productSubmit()}}},[t._v("添 加")])],1)],1),t._v(" "),a("h3",[t._v("总条数："+t._s(t.productCount))]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.productList,"empty-text":t.without}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"procode",label:"产成品编码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"proname",label:"品名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typename",label:"所属产线"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.type.typename))])]}}])})],1),t._v(" "),a("div",{staticClass:"pageItem"},[a("new-pagination",{attrs:{"page-size":t.pageSize,total:t.productCount},on:{"current-change":t.currentChangePro,"size-change":t.sizeChangePro}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"主机厂",name:"third"}},[a("el-form",{ref:"oemform",attrs:{model:t.oemform,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"主机厂名称"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.oemform.oemname,callback:function(e){t.$set(t.oemform,"oemname",e)},expression:"oemform.oemname"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"oenstn",attrs:{type:"primary"},on:{click:function(e){t.oemSubmit()}}},[t._v("添 加")])],1)],1),t._v(" "),a("h3",[t._v("总条数："+t._s(t.oemCount))]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.oemList,"default-sort":{prop:"oemname",order:"descending"},"empty-text":t.without}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"oemname",label:"主机厂名称"}})],1),t._v(" "),a("div",{staticClass:"pageItem"},[a("new-pagination",{attrs:{"page-size":t.pageSize,total:t.oemCount},on:{"current-change":t.currentChange,"size-change":t.sizeChange}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"问题点",name:"fourth"}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"问题点"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.formData.nailname,callback:function(e){t.$set(t.formData,"nailname",e)},expression:"formData.nailname"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"oenstn",attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("添 加")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.nailList,"empty-text":t.without}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nailname",label:"问题点"}})],1)],1)],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(t){a("I+Di")},"data-v-1ac04f5e",null);e.default=r.exports},"9QV6":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("0ago"),i=a("Mbut"),r=a("XBjC"),s={data:function(){return{activeName:"first",tabPosition:"left",productList:[],productCount:0,oemList:[],oemCount:0,without:"暂无数据",typeList:[],userItem:[],nailList:[],alarmCount:0,alarmList:[],currentPage:1,pageSize:10}},mounted:function(){this.getAllOem(),this.getAllproduct(),this.getAlltype(),this.getAllRelated(),this.getAlluser(),this.getAllAlarm()},methods:{handleClick:function(t,e){"first"==this.activeName?(this.getAllOem(),this.getAllproduct(),this.getAlltype(),this.getAlluser(),this.getAllRelated(),this.getAllAlarm()):"second"==this.activeName&&this.getAllOem(),this.getAllproduct(),this.getAllRelated(),this.getAlluser()},getAllOem:function(){var t=this,e=new URLSearchParams;e.append("row",this.pageSize),e.append("page",this.currentPage),this.$http.post("/oem/List.do",e).then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":(t.oemList=e.data.data,t.oemCount=e.data.count)})},getAllproduct:function(){var t=this;this.$http.post("/product/List.do").then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":(t.productList=e.data.data,t.productCount=e.data.count)})},getAlltype:function(){var t=this;this.$http.post("/product/typeList.do").then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":t.typeList=e.data})},getAllRelated:function(){var t=this;this.$http.post("/nail/List.do").then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":t.nailList=e.data})},getAlluser:function(){var t=this;this.$http.post("person/getName.do").then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":t.userItem=e.data})},getAllAlarm:function(){var t=this,e=new URLSearchParams;e.append("row",this.pageSize),e.append("page",this.currentPage),this.$http.post("/alarm/List.do",e).then(function(e){"permission.html"===e.data?t.without="无权限，请联系管理员":(t.alarmList=e.data.data,t.alarmCount=e.data.count)})}},components:{vConfig:l.default,vAlarmtable:i.default,vAdd:r.default}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trace"},[a("div",{staticClass:"btn_box"}),t._v(" "),a("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":t.tabPosition},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"问题列表",name:"first"}},[a("v-alarmtable",{attrs:{oemList:t.oemList,productList:t.productList,userItem:t.userItem,typeList:t.typeList,without:t.without,nailList:t.nailList,alarmListF:t.alarmList,alarmCountF:t.alarmCount}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"问题添加",name:"second"}},[a("v-add",{attrs:{oemListadd:t.oemList,productList:t.productList,userItem:t.userItem,without:t.without,nailList:t.nailList}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"配置相关",name:"third"}},[a("v-config")],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,o,!1,function(t){a("SCH0")},"data-v-5d350fe1",null);e.default=n.exports},HJYl:function(t,e){},"I+Di":function(t,e){},Mbut:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={props:{userItem:Array,oemList:Array,productList:Array,typeList:Array,nailList:Array,alarmListF:{type:Array},alarmCountF:{type:Number},without:String},data:function(){return{tablewithout:"暂无数据",expands:[],pageSize:10,checkList:[],materialname:"无数据",fuserid:null,dialogTableVisible:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},selecttype:[{value:"0",label:"未完成"},{value:"1",label:"已完成"}],allqueList:[],typevalue:null,inputpcode:null,inputValue:null,valueLine:null,statevalue:null,date1:"",date2:"",materialid:"",value:"",que:null,form:{cause:"",solution:"",question:"",quetype:"",remark:""},formLabelWidth:"120px",features:[],currentPage4:4,alarmList:this.alarmListF,alarmCount:this.alarmCountF,serialid:"",oemid:"",oemvalue:null,prov:"",city:"",district:"",currentPage:1,cityArr:[],materialImg:[],materialFile:[],selectList:[],materialFilePDF:[],selectItem:"",districtArr:[]}},watch:{alarmListF:function(t){this.alarmList=t},alarmCountF:function(t){this.alarmCount=t}},methods:{toAlarmExcel:function(){var t=this,e=new URLSearchParams;""==this.selectItem?e.append("select","null"):e.append("select",this.selectItem),e.append("map","null"),this.$http({url:"alarm/download.do",method:"post",data:e,responseType:"blob"}).then(function(e){if("permission.html"===e.data)t.$message.error("您没有权限！请联系管理员！");else{var a=new Blob([e.data],{type:"application/vnd.ms-excel"}),l=document.createElement("a");l.download="问题列表.xls",l.style.display="none",l.href=URL.createObjectURL(a),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}}).catch(function(){t.$message.error("导出失败")})},currentChange:function(t){this.currentPage=t,this.freedomSelect()},sizeChange:function(t){s,this.pageSize=t,this.freedomSelect()},resetting:function(){var t=this;this.date1="",this.date2="",this.statevalue=null,this.valueLine=null,this.inputpcode=null,this.fuserid=null,this.que=null,this.inputValue=null,this.oemvalue=null,this.typevalue=null;var e=new URLSearchParams;e.append("row",this.pageSize),e.append("page",this.currentPage),this.$http.post("/alarm/List.do",e).then(function(e){"permission.html"===e.data?t.tablewithout="无权限，请联系管理员":(t.alarmList=e.data.data,t.alarmCount=e.data.count)})},toogleExpand:function(t){this.dialogTableVisible=!0,this.materialImg=[],this.materailsFileList=[],this.materialFilePDF=[],this.materialFile=[];for(var e=0;e<t.materails.length;e++){if(1==t.materails[e].materialtype){var a=t.materails[e].materialurl;this.materialImg.push(a)}else{var l=t.materails[e],i=t.materails[e].materialurl.lastIndexOf(".");"pdf"==t.materails[e].materialurl.substr(i+1)?this.materialFilePDF.push(l):this.materialFile.push(l)}}},freedomSelect:function(){var t=this,e=this.date1[0];void 0==e&&(e=null);var a=this.date1[1];void 0==a&&(a=null);var l=this.date2[0];void 0==l&&(l=null);var i=this.date2[1];void 0==i&&(i=null);var r="crts&"+e,s="crto&"+a,o="erts&"+l,n="erto&"+i,p="state&"+this.statevalue,u="fzr&"+this.fuserid,c="que&"+this.que,m="tcz&"+this.inputValue,d="oem&"+this.oemvalue,f="num&"+this.inputpcode,h="type&"+this.valueLine,v="pid&"+this.typevalue;this.selectList.push(r,s,o,n,p,u,c,m,d,f,h,v),this.selectItem=this.selectList.join("_");var b=new URLSearchParams;b.append("select",this.selectItem),b.append("row",this.pageSize),b.append("page",this.currentPage),this.selectList=[],this.$http.post("/alarm/List.do",b).then(function(e){"permission.html"===e.data?t.$message.error("您没有权限！请联系管理员！"):(t.alarmList=e.data.data,t.alarmCount=e.data.count)})},getAllAlarm:function(){var t=this,e=new URLSearchParams;e.append("row",this.pageSize),e.append("page",this.currentPage),this.$http.post("/alarm/List.do",e).then(function(e){console.log(e),"permission.html"===e.data?t.tablewithout="无权限，请联系管理员":(t.alarmList=e.data.data,t.alarmCount=e.data.count)})}},mounted:function(){},created:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"main clearfix"},[a("div",{staticClass:"container-admin"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"反馈时间"}},[a("el-date-picker",{staticStyle:{width:"220px"},attrs:{type:"daterange",align:"right","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{width:"220px"},attrs:{label:"提出者"}},[a("el-input",{staticClass:"form-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入提出者姓名"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"产品线"}},[a("el-select",{staticClass:"form-item",attrs:{clearable:"",placeholder:"根据产线查询"},model:{value:t.valueLine,callback:function(e){t.valueLine=e},expression:"valueLine"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.typeList,function(t){return a("el-option",{key:t.typeid,attrs:{label:t.typename,value:t.typeid}})})],2)],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"品名"}},[a("el-select",{staticClass:"form-item",attrs:{clearable:"",placeholder:"请选择产品品名"},model:{value:t.typevalue,callback:function(e){t.typevalue=e},expression:"typevalue"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.productList,function(t){return a("el-option",{key:t.productid,attrs:{label:t.proname,value:t.productid}})})],2)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"完成时间"}},[a("el-date-picker",{staticStyle:{width:"220px"},attrs:{type:"daterange",align:"right","value-format":"yyyy-MM-dd","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"主机厂"}},[a("el-select",{staticClass:"form-item",attrs:{clearable:"",placeholder:"请选择主机厂"},model:{value:t.oemvalue,callback:function(e){t.oemvalue=e},expression:"oemvalue"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.oemList,function(t){return a("el-option",{key:t.oemid,attrs:{label:t.oemname,value:t.oemid}})})],2)],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"负责人"}},[a("el-select",{staticClass:"form-item",attrs:{filterable:"",clearable:"",placeholder:"请输入负责人姓名"},model:{value:t.fuserid,callback:function(e){t.fuserid=e},expression:"fuserid"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.userItem,function(t){return a("el-option",{key:t.personid,attrs:{label:t.personname,value:t.personid}})})],2)],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"问题点"}},[a("el-select",{staticClass:"div1",attrs:{clearable:"",placeholder:"选择问题"},model:{value:t.que,callback:function(e){t.que=e},expression:"que"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.nailList,function(t){return a("el-option",{key:t.nailid,attrs:{value:t.nailid,label:t.nailname}})})],2)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"状态"}},[a("el-select",{staticClass:"form-item",attrs:{clearable:"",placeholder:"请选择完成状态"},model:{value:t.statevalue,callback:function(e){t.statevalue=e},expression:"statevalue"}},t._l(t.selecttype,function(t){return a("el-option",{key:t.oemid,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"序列号"}},[a("el-input",{staticClass:"form-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入产品序列号"},model:{value:t.inputpcode,callback:function(e){t.inputpcode=e},expression:"inputpcode"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.freedomSelect()}}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.resetting()}}},[t._v("重置")])],1)])],1)],1)],1),t._v(" "),a("div",{staticClass:"table"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("h3",{staticClass:"count"},[t._v("总条数："+t._s(t.alarmCount))])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.toAlarmExcel()}}},[t._v("导出问题表格")])],1)],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.alarmList,border:"","header-cell-class-name":"table-header","empty-text":t.tablewithout}},[a("el-table-column",{attrs:{prop:"creattime",label:"反馈日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"提出者"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.tuser.person.personname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"typename",label:"产品线"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.serial.remark.product.type.typename))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"oemname",label:"主机厂"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.oem.oemname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"proname",label:"产品品名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.serial.remark.product.proname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"procode",label:"产品编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.serial.remark.product.procode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"serialnumber",label:"产品序列号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.serial.serialnumber))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"问题点",prop:"nailname"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.nails,function(e,l){return a("div",{key:l},[a("span",[t._v(t._s(e.nailname))])])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"负责人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.fuser.person.personname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cause",label:"原因分析"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.quest.cause))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"solution",label:"解决方案"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.quest.solution))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[""==e.row.remark?a("div",[a("span",{staticClass:"counttype"},[t._v("-")])]):a("div",[a("span",{staticClass:"counttype"},[t._v(t._s(e.row.remark))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"productmodel",label:"完成时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.productmodel?a("div",[a("span",{staticClass:"counttype"},[t._v("-")])]):a("div",[a("span",{staticClass:"counttype"},[t._v(t._s(e.row.productmodel))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.toogleExpand(e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"pageItem"},[a("new-pagination",{attrs:{"page-size":t.pageSize,total:t.alarmCount},on:{"current-change":t.currentChange,"size-change":t.sizeChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"附件",visible:t.dialogTableVisible,width:"60%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("图片（可预览）：")])]),t._v(" "),a("el-col",{attrs:{span:12}},t._l(t.materialImg,function(t,e){return a("div",{key:e,staticClass:"grid-content bg-purple-light"},[a("a",{attrs:{href:t}},[a("img",{staticClass:"imgItem",attrs:{src:t}})])])}),0)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("PDF文件（可预览）：")])]),t._v(" "),a("el-col",{attrs:{span:12}},t._l(t.materialFilePDF,function(e,l){return a("div",{key:l,staticClass:"grid-content bg-purple-light"},[a("a",{attrs:{href:e.materialurl}},[t._v(t._s(e.materialname+"|"))])])}),0)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("其他附件（直接下载）：")])]),t._v(" "),a("el-col",{attrs:{span:12}},t._l(t.materialFile,function(e,l){return a("div",{key:l,staticClass:"grid-content bg-purple-light"},[a("a",{attrs:{href:e.materialurl}},[t._v(t._s(e.materialname+"|"))])])}),0)],1)],1)],1)])])},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(t){a("nd3Z")},"data-v-5d72411b",null);e.default=r.exports},SCH0:function(t,e){},XBjC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("Xxa5"),i=a.n(l),r=a("exGp"),s=a.n(r),o=a("bOdI"),n=a.n(o),p={props:{userItem:Array,oemListadd:Array,productList:Array,nailList:Array,without:String},data:function(){var t;return t={formrules:{prov:[{required:!0,message:"请选择产品编码",trigger:"change"}],fuserid:[{required:!0,message:"请选择负责人",trigger:"change"}],que:[{required:!0,message:"请选择问题点",trigger:"change"}],value:[{required:!0,message:"请选择主机厂",trigger:"change"}]},tablewithout:"暂无数据",dialogFormVisible:!1,expands:[],disabled:!0,visible:!1,editProduct:!1,editVisible:!1,materialurl:"",procode:"",inputValue:"",valueLine:"",typevalue:"",date1:"",materialid:[],form:{fuserid:"",name:"",cause:"",solution:"",que:"",question:"",quetype:"",value:"",remark:""}},n()(t,"dialogFormVisible",!1),n()(t,"formLabelWidth","120px"),n()(t,"input",""),n()(t,"fileName",""),n()(t,"uploadUrl",""),n()(t,"radioImg",1),n()(t,"radiofile",2),n()(t,"fileList",[]),n()(t,"imgList",[]),n()(t,"alarmList",[]),n()(t,"allproductList",[]),n()(t,"departmentOptions",[]),n()(t,"cascaderData",[]),n()(t,"selectedOptions",[]),n()(t,"lotnumber",""),n()(t,"serialnum",""),n()(t,"serialid",""),n()(t,"oemid",""),n()(t,"prov",""),n()(t,"city",""),n()(t,"district",""),n()(t,"queP",[]),n()(t,"quePlist",""),n()(t,"productID",""),n()(t,"imgID",""),n()(t,"fileID",""),n()(t,"cityArr",[]),n()(t,"userList",[]),n()(t,"districtArr",[]),n()(t,"fileidList",[]),n()(t,"fileLIst",[]),n()(t,"fileLIstID",""),n()(t,"relatedList",[]),t},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.fileLIst=e.materialid.concat(e.fileidList),e.fileLIstID=e.fileLIst.join("_"),e.editProduct=!1;var a=new URLSearchParams;a.append("MIDs",e.fileLIstID),a.append("serailid",e.productID),a.append("fuserid",e.form.fuserid),a.append("cause",e.form.cause),a.append("solution",e.form.solution),a.append("NIDs",e.form.que),a.append("remark",e.form.remark),a.append("oemid",e.form.value),e.$http.post("/alarm/Set.do",a).then(function(t){console.log(t),"permission.html"===t.data?e.$message.error("您没有权限！请联系管理员！"):(""!=t&&e.$message.success("添加成功"),e.$refs.form.resetFields(),e.$refs.uploadImg.clearFiles(),e.$refs.upload.clearFiles(),e.fileID="")})})},onSubmitProduct:function(){var t=this;if(""!=this.form.prov&&""!=this.form.name){var e=new URLSearchParams;e.append("productid",this.form.prov),e.append("procode",this.procode),e.append("serialnumber",this.form.name),this.$http.post("/product/SetOne.do",e).then(function(e){"permission.html"===e.data?t.$message.error("您没有权限！请联系管理员！"):(t.productID=e.data,""!=t.productID&&(t.disabled=!1),t.$message.success("添加成功！"))})}else this.$message.error("请选择产品编码，输入产品序列号！")},updateCity:function(){for(var t in this.allproductList){var e=this.allproductList[t];if(e.proname==this.prov){this.cityArr=e.remarks;break}}},uploadImg:function(t){this.formDataImg.append("uploadFile",t.file),this.formDataImg.append("type",this.radioImg)},handleSubmit:function(){var t=this;return s()(i.a.mark(function e(){var a,l,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.formDataImg=new FormData,t.$refs.uploadImg.submit(),a={headers:{"Content-Type":"multipart/form-data"}},e.next=5,t.$http.post("/materail/uploads",t.formDataImg,a);case 5:l=e.sent,"permission.html"===(r=l.data).data?t.$message.error("您没有权限！请联系管理员！"):""!=r&&(t.$message.success("上传成功！"),t.materialid=r);case 8:case"end":return e.stop()}},e,t)}))()},uploadFile:function(t){this.formData.append("uploadFile",t.file),this.formData.append("type",this.radiofile)},handleSubmitfile:function(){var t=this;return s()(i.a.mark(function e(){var a,l,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.formData=new FormData,t.$refs.upload.submit(),a={headers:{"Content-Type":"multipart/form-data"}},e.next=5,t.$http.post("/materail/uploads",t.formData,a);case 5:l=e.sent,"permission.html"===(r=l.data).data?t.$message.error("您没有权限！请联系管理员！"):""!=r&&(t.$message.success("上传成功！"),t.fileidList=r);case 8:case"end":return e.stop()}},e,t)}))()},handleChange:function(t,e){},handleChangeimg:function(t,e){},beforeUpload:function(t){t.size/1024/1024<100||this.$message.error("上传的文件大小不能超过100M哦！")},getAllRelated:function(){var t=this;this.$http.post("/nail/List.do").then(function(e){"permission.html"===e.data?t.tablewithout="无权限，请联系管理员":t.relatedList=e.data})}},beforeMount:function(){this.updateCity()},watch:{prov:function(){for(var t=0;t<this.allproductList.length;t++)this.prov==this.allproductList[t].productid&&(this.procode=this.allproductList[t].procode);this.updateCity()}},created:function(){this.getAllRelated()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-box clearfix"},[a("div",{staticClass:"main"},[a("el-form",{ref:"form",staticClass:"formItem",attrs:{model:t.form,rules:t.formrules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"选择产品",prop:"prov"}},[a("el-select",{staticClass:"div1",attrs:{filterable:"",placeholder:"选择产品编码"},model:{value:t.form.prov,callback:function(e){t.$set(t.form,"prov",e)},expression:"form.prov"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.productList,function(t){return a("el-option",{key:t.productid,attrs:{value:t.productid,label:t.proname}})})],2)],1)],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{"label-width":"0",prop:"name"}},[a("el-input",{attrs:{placeholder:"选择输入产品序列号"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name "}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"product-btn",attrs:{"label-width":"0"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.onSubmitProduct()}}},[t._v("添加")])],1)],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"添加图片"}},[a("el-form",{ref:"form"},[a("el-upload",{ref:"uploadImg",staticClass:"upload-demo",attrs:{accept:".jpg, .png, .gif, .jpeg","file-list":t.imgList,"on-change":t.handleChangeimg,action:t.uploadUrl,"http-request":t.uploadImg,"show-file-list":!0,"before-upload":t.beforeUpload,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",type:"primary",size:"small"},slot:"trigger"},[t._v("选取图片")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"添加文件"}},[a("el-form",{ref:"form1"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:".pdf, .doc, .docx, .txt, .ppt, .xls, .xlsx","file-list":t.fileList,"on-change":t.handleChange,action:t.uploadUrl,"http-request":t.uploadFile,"show-file-list":!0,"before-upload":t.beforeUpload,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",type:"primary",size:"small"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.handleSubmitfile}},[t._v("提交")])],1)],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"原因分析",prop:"cause"}},[a("el-input",{attrs:{type:"textarea",placeholder:"100字以内",rows:"5"},model:{value:t.form.cause,callback:function(e){t.$set(t.form,"cause",e)},expression:"form.cause"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"解决方案",prop:"solution"}},[a("el-input",{attrs:{type:"textarea",placeholder:"100字以内",rows:"5"},model:{value:t.form.solution,callback:function(e){t.$set(t.form,"solution",e)},expression:"form.solution"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"fuserid"}},[a("el-select",{attrs:{filterable:"",placeholder:"可搜索"},model:{value:t.form.fuserid,callback:function(e){t.$set(t.form,"fuserid",e)},expression:"form.fuserid"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.userItem,function(t){return a("el-option",{key:t.personid,attrs:{label:t.personname,value:t.personid}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"问题点",prop:"que"}},[a("el-select",{staticClass:"div1",attrs:{filterable:"",placeholder:"选择问题点"},model:{value:t.form.que,callback:function(e){t.$set(t.form,"que",e)},expression:"form.que"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(this.without))])]),t._v(" "),t._l(t.nailList,function(t){return a("el-option",{key:t.nailid,attrs:{value:t.nailid,label:t.nailname}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"主机厂",prop:"value"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}},[a("template",{slot:"empty"},[a("p",[t._v(t._s(t.without))])]),t._v(" "),t._l(t.oemListadd,function(t){return a("el-option",{key:t.oemid,attrs:{label:t.oemname,value:t.oemid}})})],2)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"footer-btn"},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:function(e){t.onSubmit("form")}}},[t._v("提交")])],1)])],1)])},staticRenderFns:[]};var c=a("VU/8")(p,u,!1,function(t){a("HJYl")},"data-v-47611b1e",null);e.default=c.exports},nd3Z:function(t,e){}});